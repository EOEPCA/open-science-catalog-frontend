"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[3169],{18317:function(t,e,s){s.d(e,{Z:function(){return B}});var r=function(){var t=this,e=t._self._c;return t.href?e("b-button-group",{staticClass:"actions",attrs:{vertical:t.vertical,size:t.size}},[t.isBrowserProtocol&&t.isAsset?e("b-button",{attrs:{href:t.href,target:"_blank",variant:"primary"}},[t.browserCanOpenFile?e("b-icon-box-arrow-up-right"):e("b-icon-download"),t._v(" "+t._s(t.buttonText)+" ")],1):t._e(),e("CopyButton",{attrs:{variant:"primary",copyText:t.href}},[t._v(" "+t._s(t.copyButtonText)+" ")]),t.isAsset&&t.canShow&&!t.shown?e("b-button",{attrs:{variant:"primary"},on:{click:t.show}},[e("b-icon-eye",{staticClass:"mr-1"}),t.isThumbnail?[t._v(t._s(t.$t("assets.showThumbnail")))]:[t._v(t._s(t.$t("assets.showOnMap")))]],2):t._e(),t._l(t.actions,(function(s){return e("b-button",t._b({key:s.id,attrs:{variant:"primary"},on:{click:s.onClick}},"b-button",s.btnOptions,!1),[s.icon?e(s.icon,{tag:"component",staticClass:"mr-1"}):t._e(),t._v(" "+t._s(s.text)+" ")],1)}))],2):t._e()},i=[],n=s(38019),o=s(9236),a=s(43989),l=s(79879),c=s(20629),u=s(54998),h=s.n(u);class p{constructor(t,e){this.id=t,this.component=e}get btnOptions(){let t;return this.uri instanceof h()?t=this.uri.toString():"string"===typeof this.uri&&(t=this.uri),t?{href:t,target:"_blank"}:{}}get onClick(){return()=>{}}get uri(){return null}get show(){return!1}get icon(){return n.eK4}}class f extends p{constructor(t,e,s){super(s,e),this.asset=t}}var d=s(52940);class g extends f{get show(){return this.component.isBrowserProtocol&&"application/vnd.laszip+copc"===this.asset.type}get uri(){let t=new(h())("https://viewer.copc.io");return t.addQuery("copc",this.component.href),t}get text(){return d.ZP.t("actions.openIn",{service:"copc.io"})}}class b extends f{get show(){return this.component.isBrowserProtocol&&l.KN==this.asset.type}get uri(){let t=new(h())("https://geojson.io");return t.addQuery("data",`text/x-url,${this.component.href}`),t}get text(){return d.ZP.t("actions.openIn",{service:"geojson.io"})}}var m={CopcViewer:g,GeoJsonIo:b};class k extends p{constructor(t,e,s){super(s,e),this.link=t}get btnOptions(){let t=super.btnOptions;return t.rel=this.link.rel,t}}class w extends k{get show(){return"process"===this.link.rel&&"application/cwl"===this.link.type}get onClick(){return()=>{window.parent.postMessage({navigate:"/new-process?title="+this.link.title},"*")}}get text(){return"Open in Processing UI"}}var y={ProcessingAction:w},v={name:"HrefActions",components:{BIconBoxArrowUpRight:n.eK4,BIconDownload:n.f6I,BIconEye:n.unT,CopyButton:()=>Promise.resolve().then(s.bind(s,83163)),Description:o["default"],Metadata:()=>Promise.all([s.e(9539),s.e(2407),s.e(2768)]).then(s.bind(s,2768))},props:{data:{type:Object,required:!0},isAsset:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},size:{type:String,default:"md"},shown:{type:Boolean,default:!1}},computed:{...(0,c.Se)(["getRequestUrl"]),actions(){return Object.entries(this.isAsset?m:y).map((([t,e])=>new e(this.data,this,t))).filter((t=>t.show))},canShow(){return"string"===typeof this.data.type&&(!("server"!==this.tileRendererType||!l.Uz.includes(this.data.type))||(!this.isGdalVfs||"client"!==this.tileRendererType)&&(!!this.isBrowserProtocol&&!!l.CF.includes(this.data.type)))},protocol(){if("string"===typeof this.href&&this.href){let t=this.href.match(/^(\w+):\/\//);if(t)return t[1].toLowerCase()}return null},isBrowserProtocol(){return!this.protocol&&!this.isGdalVfs||l.F7.includes(this.protocol)},isThumbnail(){return this.isAsset?Array.isArray(this.data.roles)&&this.data.roles.includes("thumbnail"):"preview"===this.data.rel&&l.ZP.canBrowserDisplayImage(this.data)},isGdalVfs(){return l.ZP.isGdalVfsUri(this.data.href)},href(){if("string"!==typeof this.data.href)return null;let t=null;return this.context instanceof a.Z&&(t=this.context.getAbsoluteUrl()),this.getRequestUrl(this.data.href,t)},from(){if(this.isGdalVfs){let t=this.data.href.match(/^\/vsi([a-z\d]+)(_streaming)?\//);return this.protocolName(t)}return this.protocolName(this.protocol)},browserCanOpenFile(){if(this.isGdalVfs)return!1;if(l.ZP.canBrowserDisplayImage(this.data))return!0;if("string"===typeof this.data.type)switch(this.data.type.toLowerCase()){case"text/html":case"application/xhtml+xml":case"text/plain":case"application/pdf":return!0}return!1},buttonText(){if(this.browserCanOpenFile&&this.isBrowserProtocol)return this.$t("open");let t=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.download.${t}`,{source:this.from})},copyButtonText(){let t=this.isGdalVfs?"copyGdalVfsUrl":"copyUrl",e=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.${t}.${e}`,{source:this.from})}},methods:{protocolName(t){if("string"!==typeof t)return"";switch(t.toLowerCase()){case"s3":return this.$t("protocol.s3");case"abfs":case"abfss":return this.$t("protocol.azure");case"gcs":return this.$t("protocol.gcs");case"ftp":return this.$t("protocol.ftp");case"oss":return this.$t("protocol.oss");case"file":return this.$t("protocol.file")}return""},show(){let t=Object.assign({},this.data);this.isGdalVfs||(t.href=this.href),this.$emit("show",t,this.id,this.isThumbnail)}}},_=v,C=s(1001),x=(0,C.Z)(_,r,i,!1,null,null,null),B=x.exports},13169:function(t,e,s){s.r(e),s.d(e,{default:function(){return B}});var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"links mb-4"},[t.title?e("h2",[t._v(t._s(t.title))]):t._e(),t.hasGroups?t._l(t.groups,(function(s){return e("div",{key:s.rel,staticClass:"group"},[s.rel?e("h4",[t._v(t._s(s.label))]):t._e(),e("ul",t._l(s.links,(function(s,r){return e("Link",{key:r,attrs:{link:s,fallbackTitle:()=>t.fallbackTitle(s)}})})),1)])})):e("ul",t._l(t.links,(function(s,r){return e("Link",{key:r,attrs:{link:s,fallbackTitle:()=>t.fallbackTitle(s)}})})),1)],2)},i=[],n=(s(70560),function(){var t=this,e=t._self._c;return e("li",{staticClass:"link"},[e("StacLink",{staticClass:"pr-1",attrs:{id:t.popoverId,data:t.link,fallbackTitle:t.fallbackTitle}}),e("b-popover",{attrs:{target:t.popoverId,triggers:"hover",placement:"right",container:"#stac-browser","custom-class":"link-more"}},[t.link.description?e("Description",{attrs:{description:t.link.description,compact:""}}):t._e(),e("section",{staticClass:"link-actions"},[e("h3",{staticClass:"first"},[t._v(t._s(t.$t("additionalActions")))]),e("HrefActions",{attrs:{vertical:"",data:t.link,size:"sm"}})],1),e("Metadata",{attrs:{data:t.link,type:"Link",headerTag:"h3",ignoreFields:t.ignore}})],1)],1)}),o=[],a=s(18317),l=s(45704),c=s(87450);let u=0;var h={name:"Link",components:{BPopover:c.x,HrefActions:a.Z,StacLink:l["default"],Description:()=>Promise.resolve().then(s.bind(s,9236)),Metadata:()=>s.e(4566).then(s.bind(s,2768))},props:{link:{type:Object,required:!0},fallbackTitle:{type:Function,required:!0}},data(){return{ignore:["href","type","rel","title","description"]}},computed:{popoverId(){return"popover-link-"+u}},beforeCreate(){u++}},p=h,f=s(1001),d=(0,f.Z)(p,n,o,!1,null,null,null),g=d.exports,b=s(2407),m=s(19263),k=s(54261),w=s(79879),y=s(52940),v=s(20629),_={name:"Links",components:{Link:g},props:{title:{type:String,default:null},links:{type:Array,default:()=>[]}},computed:{...(0,v.rn)(["uiLanguage"]),groups(){let t=this.links.reduce(((t,e)=>{let s="string"===typeof e.rel?e.rel.toLowerCase():"";return s in t?t[s].links.push(e):t[s]={rel:s,label:this.formatRel(s),links:[e]},t}),{});return Object.values(t).sort(((t,e)=>t.label.localeCompare(e.label,this.uiLanguage)))},hasGroups(){return this.groups.some((t=>t.rel.length>0&&t.links.length>=2))}},methods:{formatRel(t){let e="string"===typeof t?t.toLowerCase():"";return e in b.Fields.links.rel.mapping?(0,y.Cy)(b.Fields.links.rel.mapping[e]):(t.startsWith(k.Eg)&&(t=t.substr(k.Eg.length)),(0,m.formatKey)(t))},fallbackTitle(t){let e=w.ZP.titleForHref(t.href);if(this.hasGroups)return e;{let s=this.formatRel(t.rel);return`${s}: ${e}`}}}},C=_,x=(0,f.Z)(C,r,i,!1,null,null,null),B=x.exports}}]);
//# sourceMappingURL=3169.fadb9d11.js.map