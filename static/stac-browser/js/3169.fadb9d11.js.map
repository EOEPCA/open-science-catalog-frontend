{"version":3,"file":"js/3169.fadb9d11.js","mappings":"qLAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAII,KAAMF,EAAG,iBAAiB,CAACG,YAAY,UAAUC,MAAM,CAAC,SAAWN,EAAIO,SAAS,KAAOP,EAAIQ,OAAO,CAAER,EAAIS,mBAAqBT,EAAIU,QAASR,EAAG,WAAW,CAACI,MAAM,CAAC,KAAON,EAAII,KAAK,OAAS,SAAS,QAAU,YAAY,CAAEJ,EAAIW,mBAAoBT,EAAG,6BAA6BA,EAAG,mBAAmBF,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIc,YAAY,MAAM,GAAGd,EAAIe,KAAKb,EAAG,aAAa,CAACI,MAAM,CAAC,QAAU,UAAU,SAAWN,EAAII,OAAO,CAACJ,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIgB,gBAAgB,OAAQhB,EAAIU,SAAWV,EAAIiB,UAAYjB,EAAIkB,MAAOhB,EAAG,WAAW,CAACI,MAAM,CAAC,QAAU,WAAWa,GAAG,CAAC,MAAQnB,EAAIoB,OAAO,CAAClB,EAAG,aAAa,CAACG,YAAY,SAAUL,EAAIqB,YAAa,CAACrB,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIsB,GAAG,2BAA2B,CAACtB,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIsB,GAAG,wBAAwB,GAAGtB,EAAIe,KAAKf,EAAIuB,GAAIvB,EAAIwB,SAAS,SAASC,GAAQ,OAAOvB,EAAG,WAAWF,EAAI0B,GAAG,CAACC,IAAIF,EAAOG,GAAGtB,MAAM,CAAC,QAAU,WAAWa,GAAG,CAAC,MAAQM,EAAOI,UAAU,WAAWJ,EAAOK,YAAW,GAAO,CAAEL,EAAOM,KAAM7B,EAAGuB,EAAOM,KAAK,CAACC,IAAI,YAAY3B,YAAY,SAASL,EAAIe,KAAKf,EAAIY,GAAG,IAAIZ,EAAIa,GAAGY,EAAOQ,MAAM,MAAM,EAAE,KAAI,GAAGjC,EAAIe,IACllC,EACImB,EAAkB,G,0ECCP,MAAMC,EAEnBC,WAAAA,CAAYR,EAAIS,GACdpC,KAAK2B,GAAKA,EACV3B,KAAKoC,UAAYA,CACnB,CAEA,cAAIP,GACF,IAAI1B,EAOJ,OANIH,KAAKqC,eAAeC,IACtBnC,EAAOH,KAAKqC,IAAIE,WAEW,kBAAbvC,KAAKqC,MACnBlC,EAAOH,KAAKqC,KAEVlC,EACK,CACLA,OACAqC,OAAQ,UAGL,CAAC,CACV,CAEA,WAAIZ,GACF,MAAO,MACT,CAEA,OAAIS,GACF,OAAO,IACT,CAEA,QAAIlB,GACF,OAAO,CACT,CAEA,QAAIW,GACF,OAAOW,EAAAA,GACT,ECvCa,MAAMC,UAA0BR,EAE7CC,WAAAA,CAAYQ,EAAOP,EAAWT,GAC5BiB,MAAMjB,EAAIS,GACVpC,KAAK2C,MAAQA,CACf,E,eCHa,MAAME,UAAmBH,EAEtC,QAAIvB,GACF,OAAOnB,KAAKoC,UAAU5B,mBAAyC,gCAApBR,KAAK2C,MAAMG,IACxD,CAEA,OAAIT,GACF,IAAIA,EAAM,IAAIC,IAAJ,CAAQ,0BAElB,OADAD,EAAIU,SAAS,OAAQ/C,KAAKoC,UAAUjC,MAC7BkC,CACT,CAEA,QAAIL,GACF,OAAOgB,EAAAA,GAAKC,EAAE,iBAAkB,CAACC,QAAS,WAC5C,ECba,MAAMC,UAAkBT,EAErC,QAAIvB,GACF,OAAOnB,KAAKoC,UAAU5B,mBAAqB4C,EAAAA,IAAoBpD,KAAK2C,MAAMG,IAC5E,CAEA,OAAIT,GAEF,IAAIA,EAAM,IAAIC,IAAJ,CAAQ,sBAElB,OADAD,EAAIU,SAAS,OAAS,cAAa/C,KAAKoC,UAAUjC,QAC3CkC,CACT,CAEA,QAAIL,GACF,OAAOgB,EAAAA,GAAKC,EAAE,iBAAkB,CAACC,QAAS,cAC5C,EChBF,OACEL,WAAU,EACVM,UAASA,GCJI,MAAME,UAAyBnB,EAE5CC,WAAAA,CAAYmB,EAAMlB,EAAWT,GAC3BiB,MAAMjB,EAAIS,GACVpC,KAAKsD,KAAOA,CACd,CAEA,cAAIzB,GACF,IAAI0B,EAAMX,MAAMf,WAEhB,OADA0B,EAAIC,IAAMxD,KAAKsD,KAAKE,IACbD,CACT,ECXa,MAAME,UAAyBJ,EAC5C,QAAIlC,GACF,MAA0B,YAAlBnB,KAAKsD,KAAKE,KAAwC,oBAAnBxD,KAAKsD,KAAKR,IACnD,CAGA,WAAIlB,GACF,MAAO,KACL8B,OAAOC,OAAOC,YAAY,CACxBC,SAAU,sBAAwB7D,KAAKsD,KAAKQ,OAC3C,IAAI,CAEX,CAEA,QAAI9B,GACF,MAAO,uBACT,EChBF,OAEAyB,iBAAgBA,GC4BhB,GACAM,KAAA,cACAC,WAAA,CACAvB,qBAAA,MACAwB,cAAA,MACAC,SAAA,MACAC,WAAAA,IAAA,wCACAC,YAAA,aACAC,SAAAA,IAAA,mEAEAC,MAAA,CACAC,KAAA,CACAzB,KAAA0B,OACAC,UAAA,GAEAhE,QAAA,CACAqC,KAAA4B,QACAC,SAAA,GAEArE,SAAA,CACAwC,KAAA4B,QACAC,SAAA,GAEApE,KAAA,CACAuC,KAAA8B,OACAD,QAAA,MAEA1D,MAAA,CACA6B,KAAA4B,QACAC,SAAA,IAGAE,SAAA,KACAC,EAAAA,EAAAA,IAAA,mBACAvD,OAAAA,GACA,OAAAiD,OAAAO,QAAA,KAAAtE,QAAAuE,EAAAC,GACAC,KAAA,EAAAvD,EAAAwD,KAAA,IAAAA,EAAA,KAAAZ,KAAA,KAAA5C,KACAyD,QAAAD,GAAAA,EAAAhE,MACA,EACAH,OAAAA,GAEA,6BAAAuD,KAAAzB,SAIA,gBAAAuC,mBAAAC,EAAAA,GAAAC,SAAA,KAAAhB,KAAAzB,UAIA,KAAA0C,WAAA,gBAAAH,sBAIA,KAAA7E,qBAIAiF,EAAAA,GAAAF,SAAA,KAAAhB,KAAAzB,OAIA,EACA4C,QAAAA,GACA,0BAAAvF,MACA,KAAAA,KAAA,CACA,IAAAwF,EAAA,KAAAxF,KAAAwF,MAAA,eACA,GAAAA,EACA,OAAAA,EAAA,GAAAC,aAEA,CAEA,WACA,EACApF,iBAAAA,GACA,YAAAkF,WAAA,KAAAF,WAAAK,EAAAA,GAAAN,SAAA,KAAAG,SACA,EACAtE,WAAAA,GACA,YAAAX,QACAqF,MAAAC,QAAA,KAAAxB,KAAAyB,QAAA,KAAAzB,KAAAyB,MAAAT,SAAA,aAGA,iBAAAhB,KAAAf,KAAAyC,EAAAA,GAAAC,uBAAA,KAAA3B,KAEA,EACAiB,SAAAA,GACA,OAAAS,EAAAA,GAAAE,aAAA,KAAA5B,KAAApE,KACA,EACAA,IAAAA,GACA,0BAAAoE,KAAApE,KACA,YAEA,IAAAiG,EAAA,KAIA,OAHA,KAAAC,mBAAAC,EAAAA,IACAF,EAAA,KAAAC,QAAAE,kBAEA,KAAAC,cAAA,KAAAjC,KAAApE,KAAAiG,EACA,EACAK,IAAAA,GACA,QAAAjB,UAAA,CACA,IAAA1C,EAAA,KAAAyB,KAAApE,KAAAwF,MAAA,mCACA,YAAAe,aAAA5D,EACA,CAEA,YAAA4D,aAAA,KAAAhB,SAEA,EACAhF,kBAAAA,GACA,QAAA8E,UACA,SAEA,GAAAS,EAAAA,GAAAC,uBAAA,KAAA3B,MACA,SAEA,0BAAAA,KAAAzB,KACA,YAAAyB,KAAAzB,KAAA8C,eACA,gBACA,4BACA,iBACA,sBACA,SAGA,QACA,EACA/E,UAAAA,GACA,QAAAH,oBAAA,KAAAF,kBACA,YAAAa,GAAA,QAEA,IAAAsF,GAAA,KAAAnG,mBAAA,KAAAiG,KAAA,uBACA,YAAApF,GAAA,mBAAAsF,IAAA,CAAAC,OAAA,KAAAH,MACA,EACA1F,cAAAA,GACA,IAAA8F,EAAA,KAAArB,UAAA,2BACAmB,GAAA,KAAAnG,mBAAA,KAAAiG,KAAA,uBACA,YAAApF,GAAA,UAAAwF,KAAAF,IAAA,CAAAC,OAAA,KAAAH,MACA,GAEAK,QAAA,CACAJ,YAAAA,CAAAhB,GACA,qBAAAA,EACA,SAEA,OAAAA,EAAAE,eACA,SACA,YAAAvE,GAAA,eACA,WACA,YACA,YAAAA,GAAA,kBACA,UACA,YAAAA,GAAA,gBACA,UACA,YAAAA,GAAA,gBACA,UACA,YAAAA,GAAA,gBACA,WACA,YAAAA,GAAA,iBAEA,QACA,EACAF,IAAAA,GACA,IAAAoD,EAAAC,OAAAuC,OAAA,QAAAxC,MAEA,KAAAiB,YACAjB,EAAApE,KAAA,KAAAA,MAEA,KAAA6G,MAAA,OAAAzC,EAAA,KAAA5C,GAAA,KAAAP,YACA,ICtM0P,I,UCOtPgB,GAAY,OACd,EACAtC,EACAmC,GACA,EACA,KACA,KACA,MAIF,EAAeG,EAAiB,O,qEClBhC,IAAItC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,UAAU,CAACG,YAAY,cAAc,CAAEL,EAAI+D,MAAO7D,EAAG,KAAK,CAACF,EAAIY,GAAGZ,EAAIa,GAAGb,EAAI+D,UAAU/D,EAAIe,KAAMf,EAAIkH,UAAWlH,EAAIuB,GAAIvB,EAAImH,QAAQ,SAASC,GAAO,OAAOlH,EAAG,MAAM,CAACyB,IAAIyF,EAAM3D,IAAIpD,YAAY,SAAS,CAAE+G,EAAM3D,IAAKvD,EAAG,KAAK,CAACF,EAAIY,GAAGZ,EAAIa,GAAGuG,EAAMC,UAAUrH,EAAIe,KAAKb,EAAG,KAAKF,EAAIuB,GAAI6F,EAAME,OAAO,SAAS/D,EAAK5B,GAAK,OAAOzB,EAAG,OAAO,CAACyB,IAAIA,EAAIrB,MAAM,CAAC,KAAOiD,EAAK,cAAgBgE,IAAMvH,EAAIuH,cAAchE,KAAQ,IAAG,IAAI,IAAGrD,EAAG,KAAKF,EAAIuB,GAAIvB,EAAIsH,OAAO,SAAS/D,EAAK5B,GAAK,OAAOzB,EAAG,OAAO,CAACyB,IAAIA,EAAIrB,MAAM,CAAC,KAAOiD,EAAK,cAAgBgE,IAAMvH,EAAIuH,cAAchE,KAAQ,IAAG,IAAI,EACpnB,EACIrB,EAAkB,GCFlBnC,G,SAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,KAAK,CAACG,YAAY,QAAQ,CAACH,EAAG,WAAW,CAACG,YAAY,OAAOC,MAAM,CAAC,GAAKN,EAAIwH,UAAU,KAAOxH,EAAIuD,KAAK,cAAgBvD,EAAIuH,iBAAiBrH,EAAG,YAAY,CAACI,MAAM,CAAC,OAASN,EAAIwH,UAAU,SAAW,QAAQ,UAAY,QAAQ,UAAY,gBAAgB,eAAe,cAAc,CAAExH,EAAIuD,KAAKkE,YAAavH,EAAG,cAAc,CAACI,MAAM,CAAC,YAAcN,EAAIuD,KAAKkE,YAAY,QAAU,MAAMzH,EAAIe,KAAKb,EAAG,UAAU,CAACG,YAAY,gBAAgB,CAACH,EAAG,KAAK,CAACG,YAAY,SAAS,CAACL,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIsB,GAAG,yBAAyBpB,EAAG,cAAc,CAACI,MAAM,CAAC,SAAW,GAAG,KAAON,EAAIuD,KAAK,KAAO,SAAS,GAAGrD,EAAG,WAAW,CAACI,MAAM,CAAC,KAAON,EAAIuD,KAAK,KAAO,OAAO,UAAY,KAAK,aAAevD,EAAI0H,WAAW,IAAI,EACtvB,GACIxF,EAAkB,G,iCCiBtB,IAAAyF,EAAA,EAEA,OACA3D,KAAA,OACAC,WAAA,CACA2D,SAAA,IACAC,YAAA,IACAC,SAAA,aACAzD,YAAAA,IAAA,uCACAC,SAAAA,IAAA,gCAEAC,MAAA,CACAhB,KAAA,CACAR,KAAA0B,OACAC,UAAA,GAEA6C,cAAA,CACAxE,KAAAgF,SACArD,UAAA,IAGAF,IAAAA,GACA,OACAkD,OAAA,4CAEA,EACA5C,SAAA,CACA0C,SAAAA,GACA,sBAAAG,CACA,GAEAK,YAAAA,GACAL,GACA,GCpDmP,I,UCQ/OtF,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIF,EAAeA,EAAiB,Q,iECQhC,GACA2B,KAAA,QACAC,WAAA,CACAgE,KAAAA,GAEA1D,MAAA,CACAR,MAAA,CACAhB,KAAA8B,OACAD,QAAA,MAEA0C,MAAA,CACAvE,KAAAgD,MACAnB,QAAAA,IAAA,KAGAE,SAAA,KACAoD,EAAAA,EAAAA,IAAA,gBACAf,MAAAA,GACA,IAAAA,EAAA,KAAAG,MAAAa,QAAA,CAAAC,EAAA7E,KACA,IAAAE,EAAA,kBAAAF,EAAAE,IAAAF,EAAAE,IAAAoC,cAAA,GAWA,OAVApC,KAAA2E,EACAA,EAAA3E,GAAA6D,MAAAe,KAAA9E,GAGA6E,EAAA3E,GAAA,CACAA,IAAAA,EACA4D,MAAA,KAAAiB,UAAA7E,GACA6D,MAAA,CAAA/D,IAGA6E,CAAA,GACA,IACA,OAAA3D,OAAA8D,OAAApB,GAAAqB,MAAA,CAAAC,EAAAC,IAAAD,EAAApB,MAAAsB,cAAAD,EAAArB,MAAA,KAAAuB,aACA,EACA1B,SAAAA,GACA,YAAAC,OAAA0B,MAAAzB,GAAAA,EAAA3D,IAAAqF,OAAA,GAAA1B,EAAAE,MAAAwB,QAAA,GACA,GAEA/B,QAAA,CACAuB,SAAAA,CAAA7E,GACA,IAAAsF,EAAA,kBAAAtF,EAAAA,EAAAoC,cAAA,GACA,OAAAkD,KAAAC,EAAAA,OAAA1B,MAAA7D,IAAAwF,SACAC,EAAAA,EAAAA,IAAAF,EAAAA,OAAA1B,MAAA7D,IAAAwF,QAAAF,KAGAtF,EAAA0F,WAAAC,EAAAA,MACA3F,EAAAA,EAAA4F,OAAAD,EAAAA,GAAAN,UAEAQ,EAAAA,EAAAA,WAAA7F,GAEA,EACA8D,aAAAA,CAAAhE,GACA,IAAAQ,EAAAmC,EAAAA,GAAAqD,aAAAhG,EAAAnD,MACA,QAAA8G,UACA,OAAAnD,EAEA,CACA,IAAAN,EAAA,KAAA6E,UAAA/E,EAAAE,KACA,SAAAA,MAAAM,GACA,CACA,ICvFoP,ICQhP,GAAY,OACd,EACAhE,EACAmC,GACA,EACA,KACA,KACA,MAIF,EAAe,EAAiB,O","sources":["webpack://@radiantearth/stac-browser/./src/components/HrefActions.vue","webpack://@radiantearth/stac-browser/./src/actions/ActionPlugin.js","webpack://@radiantearth/stac-browser/./src/actions/AssetActionPlugin.js","webpack://@radiantearth/stac-browser/./src/actions/assets/CopcViewer.js","webpack://@radiantearth/stac-browser/./src/actions/assets/GeoJsonIo.js","webpack://@radiantearth/stac-browser/./assetActions.config.js","webpack://@radiantearth/stac-browser/./src/actions/LinkActionPlugin.js","webpack://@radiantearth/stac-browser/./src/actions/ProcessingAction.js","webpack://@radiantearth/stac-browser/./linkActions.config.js","webpack://@radiantearth/stac-browser/src/components/HrefActions.vue","webpack://@radiantearth/stac-browser/./src/components/HrefActions.vue?41ae","webpack://@radiantearth/stac-browser/./src/components/HrefActions.vue?3c8b","webpack://@radiantearth/stac-browser/./src/components/Links.vue","webpack://@radiantearth/stac-browser/./src/components/Link.vue","webpack://@radiantearth/stac-browser/src/components/Link.vue","webpack://@radiantearth/stac-browser/./src/components/Link.vue?289d","webpack://@radiantearth/stac-browser/./src/components/Link.vue?d642","webpack://@radiantearth/stac-browser/src/components/Links.vue","webpack://@radiantearth/stac-browser/./src/components/Links.vue?7f34","webpack://@radiantearth/stac-browser/./src/components/Links.vue?142c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.href)?_c('b-button-group',{staticClass:\"actions\",attrs:{\"vertical\":_vm.vertical,\"size\":_vm.size}},[(_vm.isBrowserProtocol && _vm.isAsset)?_c('b-button',{attrs:{\"href\":_vm.href,\"target\":\"_blank\",\"variant\":\"primary\"}},[(_vm.browserCanOpenFile)?_c('b-icon-box-arrow-up-right'):_c('b-icon-download'),_vm._v(\" \"+_vm._s(_vm.buttonText)+\" \")],1):_vm._e(),_c('CopyButton',{attrs:{\"variant\":\"primary\",\"copyText\":_vm.href}},[_vm._v(\" \"+_vm._s(_vm.copyButtonText)+\" \")]),(_vm.isAsset && _vm.canShow && !_vm.shown)?_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.show}},[_c('b-icon-eye',{staticClass:\"mr-1\"}),(_vm.isThumbnail)?[_vm._v(_vm._s(_vm.$t('assets.showThumbnail')))]:[_vm._v(_vm._s(_vm.$t('assets.showOnMap')))]],2):_vm._e(),_vm._l((_vm.actions),function(action){return _c('b-button',_vm._b({key:action.id,attrs:{\"variant\":\"primary\"},on:{\"click\":action.onClick}},'b-button',action.btnOptions,false),[(action.icon)?_c(action.icon,{tag:\"component\",staticClass:\"mr-1\"}):_vm._e(),_vm._v(\" \"+_vm._s(action.text)+\" \")],1)})],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { BIconBoxArrowUpRight } from 'bootstrap-vue';\nimport URI from 'urijs';\n\nexport default class ActionPlugin {\n\n  constructor(id, component) {\n    this.id = id;\n    this.component = component;\n  }\n\n  get btnOptions() {\n    let href;\n    if (this.uri instanceof URI) {\n      href = this.uri.toString();\n    }\n    else if (typeof this.uri === 'string') {\n      href = this.uri;\n    }\n    if (href) {\n      return {\n        href,\n        target: '_blank'\n      };\n    }\n    return {};\n  }\n\n  get onClick() {\n    return () => {};\n  }\n\n  get uri() {\n    return null;\n  }\n\n  get show() {\n    return false;\n  }\n\n  get icon() {\n    return BIconBoxArrowUpRight;\n  }\n\n}\n","import ActionPlugin from './ActionPlugin';\n\nexport default class AssetActionPlugin extends ActionPlugin {\n\n  constructor(asset, component, id) {\n    super(id, component);\n    this.asset = asset;\n  }\n\n}\n","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\nexport default class CopcViewer extends AssetActionPlugin {\n\n  get show() {\n    return this.component.isBrowserProtocol && this.asset.type === 'application/vnd.laszip+copc';\n  }\n\n  get uri() {\n    let uri = new URI(\"https://viewer.copc.io\");\n    uri.addQuery('copc', this.component.href);\n    return uri;\n  }\n\n  get text() {\n    return i18n.t('actions.openIn', {service: 'copc.io'});\n  }\n\n}","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport { geojsonMediaType } from \"../../utils\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\nexport default class GeoJsonIo extends AssetActionPlugin {\n\n  get show() {\n    return this.component.isBrowserProtocol && geojsonMediaType == this.asset.type;\n  }\n\n  get uri() {\n    // Docs: https://github.com/Cenergy/geojson.io/blob/main/API.md\n    let uri = new URI(\"https://geojson.io\");\n    uri.addQuery('data', `text/x-url,${this.component.href}`);\n    return uri;\n  }\n\n  get text() {\n    return i18n.t('actions.openIn', {service: 'geojson.io'});\n  }\n\n}","import CopcViewer from './src/actions/assets/CopcViewer.js';\nimport GeoJsonIo from './src/actions/assets/GeoJsonIo.js';\n//import Felt from './src/actions/assets/Felt.js';\n\nexport default {\n  CopcViewer,\n  GeoJsonIo,\n//Felt\n};","import ActionPlugin from './ActionPlugin';\n\nexport default class LinkActionPlugin extends ActionPlugin {\n\n  constructor(link, component, id) {\n    super(id, component);\n    this.link = link;\n  }\n\n  get btnOptions() {\n    let obj = super.btnOptions;\n    obj.rel = this.link.rel;\n    return obj;\n  }\n\n}","import LinkActionPlugin from \"./LinkActionPlugin\"\n\nexport default class ProcessingAction extends LinkActionPlugin {\n  get show() {\n    return (this.link.rel === 'process' && this.link.type === 'application/cwl');\n  }\n\n\n  get onClick() {\n    return () => {\n      window.parent.postMessage({\n        navigate: '/new-process?title=' + this.link.title\n      }, '*');\n    };\n  }\n\n  get text() {\n    return 'Open in Processing UI';\n  }\n}\n","//import Felt from './src/actions/links/Felt.js';\nimport ProcessingAction from \"./src/actions/ProcessingAction\";\nexport default {\n//Felt\nProcessingAction\n};\n","<template>\n  <b-button-group class=\"actions\" :vertical=\"vertical\" :size=\"size\" v-if=\"href\">\n    <b-button v-if=\"isBrowserProtocol && isAsset\" :href=\"href\" target=\"_blank\" variant=\"primary\">\n      <b-icon-box-arrow-up-right v-if=\"browserCanOpenFile\" /> \n      <b-icon-download v-else />\n      {{ buttonText }}\n    </b-button>\n    <CopyButton variant=\"primary\" :copyText=\"href\">\n      {{ copyButtonText }}\n    </CopyButton>\n    <b-button v-if=\"isAsset && canShow && !shown\" @click=\"show\" variant=\"primary\">\n      <b-icon-eye class=\"mr-1\" />\n      <template v-if=\"isThumbnail\">{{ $t('assets.showThumbnail') }}</template>\n      <template v-else>{{ $t('assets.showOnMap') }}</template>\n    </b-button>\n    <b-button v-for=\"action of actions\" v-bind=\"action.btnOptions\" :key=\"action.id\" variant=\"primary\" @click=\"action.onClick\">\n      <component v-if=\"action.icon\" :is=\"action.icon\" class=\"mr-1\" />\n      {{ action.text }}\n    </b-button>\n  </b-button-group>\n</template>\n\n\n<script>\nimport { BIconBoxArrowUpRight, BIconDownload, BIconEye } from 'bootstrap-vue';\nimport Description from './Description.vue';\nimport STAC from '../models/stac';\nimport Utils, { browserProtocols, imageMediaTypes, mapMediaTypes } from '../utils';\nimport { mapGetters } from 'vuex';\nimport AssetActions from '../../assetActions.config';\nimport LinkActions from '../../linkActions.config';\n\nexport default {\n  name: 'HrefActions',\n  components: {\n    BIconBoxArrowUpRight,\n    BIconDownload,\n    BIconEye,\n    CopyButton: () => import('./CopyButton.vue'),\n    Description,\n    Metadata: () => import('./Metadata.vue')\n  },\n  props: {\n    data: {\n      type: Object,\n      required: true\n    },\n    isAsset: {\n      type: Boolean,\n      default: false\n    },\n    vertical: {\n      type: Boolean,\n      default: false\n    },\n    size: {\n      type: String,\n      default: 'md'\n    },\n    shown: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    ...mapGetters(['getRequestUrl']),\n    actions() {\n      return Object.entries(this.isAsset ? AssetActions : LinkActions)\n        .map(([id, plugin]) => new plugin(this.data, this, id))\n        .filter(plugin => plugin.show);\n    },\n    canShow() {\n      // We need to know the type, otherwise we don't even try to show it\n      if (typeof this.data.type !== 'string') {\n        return false;\n      }\n      // If the tile renderer is a tile server, we can't really know what it supports so we pass all images\n      else if (this.tileRendererType === 'server' && imageMediaTypes.includes(this.data.type)) {\n        return true;\n      }\n      // Don't pass GDAL VFS URIs to client-side tile renderer: https://github.com/radiantearth/stac-browser/issues/116\n      else if (this.isGdalVfs && this.tileRendererType === 'client') {\n        return false;\n      }\n      // Only http(s) links and relative links are supported\n      else if (!this.isBrowserProtocol) {\n        return false;\n      }\n      // Otherwise, all images that a browser can read are supported + JSON\n      else if (mapMediaTypes.includes(this.data.type)) {\n        return true;\n      }\n      return false;\n    },\n    protocol() {\n      if (typeof this.href === 'string') {\n        if (this.href) {\n          let match = this.href.match(/^(\\w+):\\/\\//);\n          if (match) {\n            return match[1].toLowerCase();\n          }\n        }\n      }\n      return null;\n    },\n    isBrowserProtocol() {\n      return (!this.protocol && !this.isGdalVfs) || browserProtocols.includes(this.protocol);\n    },\n    isThumbnail() {\n      if (this.isAsset) {\n        return Array.isArray(this.data.roles) && this.data.roles.includes('thumbnail');\n      }\n      else {\n        return this.data.rel === 'preview' && Utils.canBrowserDisplayImage(this.data);\n      }\n    },\n    isGdalVfs() {\n      return Utils.isGdalVfsUri(this.data.href);\n    },\n    href() {\n      if (typeof this.data.href !== 'string') {\n        return null;\n      }\n      let baseUrl = null;\n      if (this.context instanceof STAC) {\n        baseUrl = this.context.getAbsoluteUrl();\n      }\n      return this.getRequestUrl(this.data.href, baseUrl);\n    },\n    from() {\n      if (this.isGdalVfs) {\n        let type = this.data.href.match(/^\\/vsi([a-z\\d]+)(_streaming)?\\//);\n        return this.protocolName(type);\n      }\n      else {\n        return this.protocolName(this.protocol);\n      }\n    },\n    browserCanOpenFile() {\n      if (this.isGdalVfs)  {\n        return false;\n      }\n      if (Utils.canBrowserDisplayImage(this.data)) {\n        return true;\n      }\n      else if (typeof this.data.type === 'string') {\n        switch(this.data.type.toLowerCase()) {\n          case 'text/html':\n          case 'application/xhtml+xml':\n          case 'text/plain':\n          case 'application/pdf':\n            return true;\n        }\n      }\n      return false;\n    },\n    buttonText() {\n      if (this.browserCanOpenFile && this.isBrowserProtocol) {\n        return this.$t('open');\n      }\n      let where = (!this.isBrowserProtocol && this.from) ? 'withSource' : 'generic';\n      return this.$t(`assets.download.${where}`, {source: this.from});\n    },\n    copyButtonText() {\n      let what = this.isGdalVfs ? 'copyGdalVfsUrl' : 'copyUrl';\n      let where = (!this.isBrowserProtocol && this.from) ? 'withSource' : 'generic';\n      return this.$t(`assets.${what}.${where}`, {source: this.from});\n    }\n  },\n  methods: {\n    protocolName(protocol) {\n      if (typeof protocol !== 'string') {\n        return '';\n      }\n      switch(protocol.toLowerCase()) {\n        case 's3':\n          return this.$t('protocol.s3');\n        case 'abfs':\n        case 'abfss':\n          return this.$t('protocol.azure');\n        case 'gcs':\n          return this.$t('protocol.gcs');\n        case 'ftp':\n          return this.$t('protocol.ftp');\n        case 'oss':\n          return this.$t('protocol.oss');\n        case 'file':\n          return this.$t('protocol.file');\n      }\n      return '';\n    },\n    show() {\n      let data = Object.assign({}, this.data);\n      // Override asset href with absolute URL if not a GDAL VFS\n      if (!this.isGdalVfs) {\n        data.href = this.href;\n      }\n      this.$emit('show', data, this.id, this.isThumbnail);\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HrefActions.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HrefActions.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./HrefActions.vue?vue&type=template&id=53be6a8f\"\nimport script from \"./HrefActions.vue?vue&type=script&lang=js\"\nexport * from \"./HrefActions.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"links mb-4\"},[(_vm.title)?_c('h2',[_vm._v(_vm._s(_vm.title))]):_vm._e(),(_vm.hasGroups)?_vm._l((_vm.groups),function(group){return _c('div',{key:group.rel,staticClass:\"group\"},[(group.rel)?_c('h4',[_vm._v(_vm._s(group.label))]):_vm._e(),_c('ul',_vm._l((group.links),function(link,key){return _c('Link',{key:key,attrs:{\"link\":link,\"fallbackTitle\":() => _vm.fallbackTitle(link)}})}),1)])}):_c('ul',_vm._l((_vm.links),function(link,key){return _c('Link',{key:key,attrs:{\"link\":link,\"fallbackTitle\":() => _vm.fallbackTitle(link)}})}),1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"link\"},[_c('StacLink',{staticClass:\"pr-1\",attrs:{\"id\":_vm.popoverId,\"data\":_vm.link,\"fallbackTitle\":_vm.fallbackTitle}}),_c('b-popover',{attrs:{\"target\":_vm.popoverId,\"triggers\":\"hover\",\"placement\":\"right\",\"container\":\"#stac-browser\",\"custom-class\":\"link-more\"}},[(_vm.link.description)?_c('Description',{attrs:{\"description\":_vm.link.description,\"compact\":\"\"}}):_vm._e(),_c('section',{staticClass:\"link-actions\"},[_c('h3',{staticClass:\"first\"},[_vm._v(_vm._s(_vm.$t('additionalActions')))]),_c('HrefActions',{attrs:{\"vertical\":\"\",\"data\":_vm.link,\"size\":\"sm\"}})],1),_c('Metadata',{attrs:{\"data\":_vm.link,\"type\":\"Link\",\"headerTag\":\"h3\",\"ignoreFields\":_vm.ignore}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <li class=\"link\">\n    <StacLink :id=\"popoverId\" :data=\"link\" :fallbackTitle=\"fallbackTitle\" class=\"pr-1\" />\n    <b-popover :target=\"popoverId\" triggers=\"hover\" placement=\"right\" container=\"#stac-browser\" custom-class=\"link-more\">\n      <Description v-if=\"link.description\" :description=\"link.description\" compact />\n      <section class=\"link-actions\">\n        <h3 class=\"first\">{{ $t('additionalActions') }}</h3>\n        <HrefActions vertical :data=\"link\" size=\"sm\" />\n      </section>\n      <Metadata :data=\"link\" type=\"Link\" headerTag=\"h3\" :ignoreFields=\"ignore\" />\n    </b-popover>\n  </li>\n</template>\n\n<script>\nimport HrefActions from './HrefActions.vue';\nimport StacLink from './StacLink.vue';\nimport { BPopover } from 'bootstrap-vue';\n\nlet linkId = 0;\n\nexport default {\n  name: \"Link\",\n  components: {\n    BPopover,\n    HrefActions,\n    StacLink,\n    Description: () => import('./Description.vue'),\n    Metadata: () => import('./Metadata.vue')\n  },\n  props: {\n    link: {\n      type: Object,\n      required: true\n    },\n    fallbackTitle: {\n      type: Function,\n      required: true\n    }\n  },\n  data() {\n    return {\n      ignore: ['href', 'type', 'rel', 'title', 'description']\n    };\n  },\n  computed: {\n    popoverId() {\n      return \"popover-link-\" + linkId;\n    }\n  },\n  beforeCreate() {\n    linkId++;\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser .link-more {\n  width: auto;\n  max-width: 600px;\n\n  .styled-description {\n    margin-bottom: 1rem;\n  }\n\n  h3 {\n    font-size: 0.85rem;\n    color: #6c757d;\n    text-align: center;\n    padding: 0;\n    font-weight: 600;\n    margin: 1rem 0 0.7rem;\n\n    &.first {\n      margin-top: 0;\n    }\n  }\n  \n  .metadata {\n    min-width: 400px;\n\n    h4 {\n      font-size: 0.85rem;\n      font-weight: normal;\n      margin-top: 0;\n      margin-bottom: 0.5rem;\n    }\n\n    .card-columns {\n      column-count: 1;\n    }\n    .card {\n      border: 0;\n      margin-top: 0;\n      font-size: 0.8rem;\n    }\n    .card-body {\n      padding: 0;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Link.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Link.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Link.vue?vue&type=template&id=3607267c\"\nimport script from \"./Link.vue?vue&type=script&lang=js\"\nexport * from \"./Link.vue?vue&type=script&lang=js\"\nimport style0 from \"./Link.vue?vue&type=style&index=0&id=3607267c&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section class=\"links mb-4\">\n    <h2 v-if=\"title\">{{ title }}</h2>\n    <template v-if=\"hasGroups\">\n      <div class=\"group\" v-for=\"group in groups\" :key=\"group.rel\">\n        <h4 v-if=\"group.rel\">{{ group.label }}</h4>\n        <ul>\n          <Link v-for=\"(link, key) in group.links\" :key=\"key\" :link=\"link\" :fallbackTitle=\"() => fallbackTitle(link)\" />\n        </ul>\n      </div>\n    </template>\n    <ul v-else>\n      <Link v-for=\"(link, key) in links\" :key=\"key\" :link=\"link\" :fallbackTitle=\"() => fallbackTitle(link)\" />\n    </ul>\n  </section>\n</template>\n\n<script>\nimport Link from './Link.vue';\nimport { Fields } from '@radiantearth/stac-fields';\nimport { formatKey } from '@radiantearth/stac-fields/helper';\nimport { ogcRelPrefix } from '../rels';\nimport Utils from '../utils';\nimport { translateFields } from '../i18n';\nimport { mapState } from 'vuex';\n\n\nexport default {\n  name: \"Links\",\n  components: {\n    Link\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    links: {\n      type: Array,\n      default: () => ([])\n    }\n  },\n  computed: {\n    ...mapState(['uiLanguage']),\n    groups() {\n      let groups = this.links.reduce((summary, link) => {\n        let rel = typeof link.rel === 'string' ? link.rel.toLowerCase() : \"\";\n        if (rel in summary) {\n          summary[rel].links.push(link);\n        }\n        else {\n          summary[rel] = {\n            rel: rel,\n            label: this.formatRel(rel),\n            links: [link]\n          };\n        }\n        return summary;\n      }, {});\n      return Object.values(groups).sort((g1, g2) => g1.label.localeCompare(g2.label, this.uiLanguage));\n    },\n    hasGroups() {\n      return this.groups.some(group => group.rel.length > 0 && group.links.length >= 2);\n    }\n  },\n  methods: {\n    formatRel(rel) {\n      let lc = typeof rel === 'string' ? rel.toLowerCase() : \"\";\n      if (lc in Fields.links.rel.mapping) {\n        return translateFields(Fields.links.rel.mapping[lc]);\n      }\n      else {\n        if (rel.startsWith(ogcRelPrefix)) {\n          rel = rel.substr(ogcRelPrefix.length);\n        }\n        return formatKey(rel);\n      }\n    },\n    fallbackTitle(link) {\n      let title = Utils.titleForHref(link.href);\n      if (this.hasGroups) {\n        return title;\n      }\n      else {\n        let rel = this.formatRel(link.rel);\n        return `${rel}: ${title}`;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser .links {\n  ul {\n    list-style-type: '-';\n    margin: 0 0 1em 1em;\n    padding: 0;\n\n    > li {\n      margin-bottom: 0.2em;\n      padding-left: 0.5em;\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Links.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Links.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Links.vue?vue&type=template&id=28209b06\"\nimport script from \"./Links.vue?vue&type=script&lang=js\"\nexport * from \"./Links.vue?vue&type=script&lang=js\"\nimport style0 from \"./Links.vue?vue&type=style&index=0&id=28209b06&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","href","staticClass","attrs","vertical","size","isBrowserProtocol","isAsset","browserCanOpenFile","_v","_s","buttonText","_e","copyButtonText","canShow","shown","on","show","isThumbnail","$t","_l","actions","action","_b","key","id","onClick","btnOptions","icon","tag","text","staticRenderFns","ActionPlugin","constructor","component","uri","URI","toString","target","BIconBoxArrowUpRight","AssetActionPlugin","asset","super","CopcViewer","type","addQuery","i18n","t","service","GeoJsonIo","geojsonMediaType","LinkActionPlugin","link","obj","rel","ProcessingAction","window","parent","postMessage","navigate","title","name","components","BIconDownload","BIconEye","CopyButton","Description","Metadata","props","data","Object","required","Boolean","default","String","computed","mapGetters","entries","AssetActions","LinkActions","map","plugin","filter","tileRendererType","imageMediaTypes","includes","isGdalVfs","mapMediaTypes","protocol","match","toLowerCase","browserProtocols","Array","isArray","roles","Utils","canBrowserDisplayImage","isGdalVfsUri","baseUrl","context","STAC","getAbsoluteUrl","getRequestUrl","from","protocolName","where","source","what","methods","assign","$emit","hasGroups","groups","group","label","links","fallbackTitle","popoverId","description","ignore","linkId","BPopover","HrefActions","StacLink","Function","beforeCreate","Link","mapState","reduce","summary","push","formatRel","values","sort","g1","g2","localeCompare","uiLanguage","some","length","lc","Fields","mapping","translateFields","startsWith","ogcRelPrefix","substr","formatKey","titleForHref"],"sourceRoot":""}